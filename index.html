<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GT-salat-dikr - نظام إشعارات الصلاة والأذكار المتكامل</title>
    <meta name="description" content="برنامج متكامل لمواقيت الصلاة والأذكار يعمل على جميع توزيعات لينكس - مفتوح المصدر ومرخص تحت GPL">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2e7d32;
            --primary-dark: #1b5e20;
            --secondary: #f5f5f5;
            --text: #333;
            --text-light: #666;
            --accent: #8bc34a;
            --background: #fff;
            --card-bg: #f8f8f8;
            --code-bg: #f1f1f1;
            --shadow: rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --primary: #4caf50;
            --primary-dark: #3d8b40;
            --secondary: #2a2a2a;
            --text: #f0f0f0;
            --text-light: #b0b0b0;
            --accent: #689f38;
            --background: #1e1e1e;
            --card-bg: #2d2d2d;
            --code-bg: #252525;
            --shadow: rgba(0, 0, 0, 0.3);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: var(--transition);
        }
        
        body {
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
            padding: 0;
            margin: 0;
        }
        
        /* تذييل الصفحة */
        header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 3rem 1rem;
            text-align: center;
            position: relative;
        }
        
        header h1 {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
        }
        
        header p {
            font-size: 1.3rem;
            max-width: 900px;
            margin: 0 auto;
            opacity: 0.9;
        }
        
        .theme-toggle {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        section {
            margin-bottom: 4rem;
        }
        
        h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--accent);
            font-size: 2rem;
        }
        
        h3 {
            color: var(--primary);
            margin: 1.5rem 0 1rem;
            font-size: 1.4rem;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .feature-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 6px 12px var(--shadow);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            border-right: 4px solid var(--primary);
        }
        
        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 20px var(--shadow);
        }
        
        .feature-card h3 {
            color: var(--primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.3rem;
        }
        
        .feature-card h3 i {
            font-size: 1.6rem;
        }
        
        .code-block {
            background-color: var(--code-bg);
            border-radius: 8px;
            padding: 1.5rem;
            overflow-x: auto;
            margin: 1.5rem 0;
            direction: ltr;
            text-align: left;
            font-family: 'Courier New', monospace;
            color: var(--text);
            border-right: 5px solid var(--primary);
            font-size: 1rem;
            line-height: 1.5;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background-color: var(--primary);
            color: white;
            padding: 1rem 2rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s;
            margin: 0.5rem 0.5rem 0.5rem 0;
            border: none;
            cursor: pointer;
            font-size: 1.1rem;
        }
        
        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background-color: var(--accent);
            color: var(--text);
        }
        
        .btn-secondary:hover {
            background-color: #7cb342;
        }
        
        footer {
            background-color: var(--secondary);
            text-align: center;
            padding: 3rem 1rem;
            margin-top: 4rem;
            color: var(--text);
        }
        
        .screenshot {
            width: 100%;
            max-width: 900px;
            margin: 1.5rem auto;
            display: block;
            border-radius: 10px;
            box-shadow: 0 6px 15px var(--shadow);
            border: 2px solid var(--accent);
        }
        
        .logo {
            font-size: 4rem;
            color: white;
            margin-bottom: 1.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .commands {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .command-item {
            background-color: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            border-right: 4px solid var(--primary);
            transition: transform 0.2s;
        }
        
        .command-item:hover {
            transform: translateX(5px);
        }
        
        .command-item code {
            font-weight: bold;
            color: var(--primary);
            font-size: 1.1rem;
            background: var(--code-bg);
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
        }
        
        .highlight {
            background: linear-gradient(120deg, var(--accent) 0%, var(--accent) 100%);
            background-repeat: no-repeat;
            background-size: 100% 0.4em;
            background-position: 0 88%;
            font-weight: bold;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .stat-item {
            text-align: center;
            padding: 1.5rem;
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 4px 8px var(--shadow);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .demo-terminal {
            background: #1e1e1e;
            color: #00ff00;
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
            font-family: 'Courier New', monospace;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }
        
        .demo-line {
            margin-bottom: 0.5rem;
        }
        
        .demo-prompt {
            color: #ffff00;
        }
        
        .demo-output {
            color: #00ffff;
        }
        
        .demo-highlight {
            color: #ff6b6b;
            font-weight: bold;
        }

        /* أنماط جديدة للعرض الحي */
        .live-prayer-widget {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            border: 2px solid var(--primary);
            text-align: center;
        }

        .prayer-info {
            font-size: 1.2rem;
            margin: 1rem 0;
        }

        .next-prayer {
            color: var(--primary);
            font-weight: bold;
            font-size: 1.4rem;
            margin: 1rem 0;
        }

        .location-info {
            color: var(--text-light);
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .loading {
            color: var(--text-light);
            font-style: italic;
        }

        .error {
            color: #ff6b6b;
            font-weight: bold;
        }

        .refresh-btn {
            background: var(--accent);
            color: var(--text);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            margin: 1rem 0;
            font-weight: bold;
            font-size: 1rem;
        }

        .refresh-btn:hover {
            background: #7cb342;
        }

        .prayer-times-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .prayer-time-item {
            background: var(--background);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            border: 1px solid var(--accent);
        }

        .prayer-time-item.next {
            background: var(--primary);
            color: white;
            transform: scale(1.05);
        }

        .prayer-name {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .prayer-time {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .method-selector {
            background: var(--background);
            border: 1px solid var(--accent);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            text-align: right;
        }

        .method-info {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-top: 0.5rem;
        }

        .method-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin: 0.5rem 0;
            font-size: 0.9rem;
        }

        .method-btn:hover {
            background: var(--primary-dark);
        }

        .manual-location-form {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            display: none;
        }

        .time-adjustment-form {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--accent);
            border-radius: 4px;
            background: var(--background);
            color: var(--text);
        }

        .location-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .time-adjustment-info {
            background: var(--accent);
            color: var(--text);
            padding: 0.8rem;
            border-radius: 4px;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .adjustment-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
            margin: 1rem 0;
        }

        .adjustment-btn {
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .adjustment-value {
            font-size: 1.2rem;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2.2rem;
            }
            
            .features {
                grid-template-columns: 1fr;
            }
            
            .commands {
                grid-template-columns: 1fr;
            }
            
            .theme-toggle {
                top: 0.5rem;
                left: 0.5rem;
                width: 40px;
                height: 40px;
            }
            
            .btn {
                padding: 0.8rem 1.5rem;
                font-size: 1rem;
            }

            .prayer-times-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .location-actions {
                flex-direction: column;
            }

            .adjustment-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <button class="theme-toggle" id="themeToggle">
            <i class="fas fa-moon"></i>
        </button>
        <div class="logo">
            <i class="fas fa-mosque"></i>
        </div>
        <h1>GT-salat-dikr 🕌</h1>
        <p>نظام إشعارات الصلاة والأذكار المتكامل - يعمل على جميع توزيعات لينكس</p>
        <p>مفتوح المصدر ⚡ مرخص تحت GPL 📜</p>
    </header>
    
    <div class="container">
        <section id="intro">
            <h2><i class="fas fa-info-circle"></i> نظام متكامل لتذكير الصلاة والأذكار</h2>
            <p>GT-salat-dikr هو نظام متكامل يجمع بين دقة مواقيت الصلاة وقوة التذكير المستمر للأذكار. مصمم خصيصًا لمستخدمي لينكس الذين يبحثون عن حل تقني متكامل يساعدهم على الالتزام بالعبادات اليومية.</p>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number">80+</div>
                    <div>ذكر متنوع</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">22</div>
                    <div>طريقة حساب</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">15+</div>
                    <div>بيئة مدعومة</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">100%</div>
                    <div>مفتوح المصدر</div>
                </div>
            </div>

<!-- عرض الصلاة الحي -->
<div class="live-prayer-widget">
    <h3><i class="fas fa-clock"></i> مواقيت الصلاة الحية</h3>
    <div class="location-info" id="locationInfo">جاري اكتشاف موقعك...</div>
    
    <!-- إعدادات طريقة الحساب -->
    <div class="method-selector">
        <div id="currentMethod">طريقة الحساب: جاري التحديد...</div>
        <button class="method-btn" onclick="showMethodSelector()">تغيير طريقة الحساب</button>
    </div>
    
    <!-- عرض مواقيت الصلاة -->
    <div id="prayerWidget">
        <div class="loading">جاري تحميل مواقيت الصلاة...</div>
    </div>
    
    <button class="refresh-btn" onclick="loadPrayerTimes()">
        <i class="fas fa-sync-alt"></i> تحديث المواقيت
    </button>
</div>

<script>
// متغيرات عامة
let userLocation = null;
let prayerData = null;
let selectedMethod = 'auto';

// خريطة طرق الحساب حسب الدولة
const methodsByCountry = {
    'SA': 3,  // السعودية - جامعة أم القرى
    'EG': 2,  // مصر - الهيئة المصرية
    'AE': 13, // الإمارات - دبي
    'KW': 7,  // الكويت
    'QA': 8,  // قطر
    'PK': 4,  // باكستان - كراتشي
    'TR': 16, // تركيا
    'FR': 5,  // فرنسا
    'US': 12, // أمريكا - ISNA
    'CA': 12, // كندا - ISNA
    'MA': 1,  // المغرب
    'DZ': 1,  // الجزائر
    'TN': 1,  // تونس
    'default': 1 // الافتراضي - رابطة العالم الإسلامي
};

// أسماء طرق الحساب
const methodNames = {
    1: 'رابطة العالم الإسلامي',
    2: 'الهيئة المصرية للمساحة',
    3: 'جامعة أم القرى',
    4: 'جامعة كراتشي',
    5: 'الاتحاد الإسلامي الفرنسي',
    7: 'وزارة الأوقاف الكويتية',
    8: 'قطر',
    12: 'أمريكا الشمالية (ISNA)',
    13: 'دبي',
    15: 'الكويت',
    16: 'تركيا'
};

// تحميل مواقيت الصلاة
async function loadPrayerTimes() {
    if (!userLocation) {
        await getUserLocation();
    }
    await fetchPrayerTimes();
}

// الحصول على موقع المستخدم
async function getUserLocation() {
    return new Promise((resolve, reject) => {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                async position => {
                    userLocation = {
                        latitude: position.coords.latitude,
                        longitude: position.coords.longitude
                    };
                    await getCityInfo();
                    resolve();
                },
                error => {
                    console.error('خطأ في تحديد الموقع:', error);
                    document.getElementById('locationInfo').textContent = 
                        'تعذر تحديد الموقع تلقائياً';
                    // استخدام موقع افتراضي
                    userLocation = { latitude: 24.7136, longitude: 46.6753 };
                    resolve();
                }
            );
        } else {
            document.getElementById('locationInfo').textContent = 
                'المتصفح لا يدعم تحديد الموقع';
            userLocation = { latitude: 24.7136, longitude: 46.6753 };
            resolve();
        }
    });
}

// الحصول على معلومات المدينة والدولة
async function getCityInfo() {
    try {
        const response = await fetch(
            `https://nominatim.openstreetmap.org/reverse?lat=${userLocation.latitude}&lon=${userLocation.longitude}&format=json&accept-language=ar`
        );
        const data = await response.json();
        
        const city = data.address.city || data.address.town || data.address.village || 'غير معروف';
        const country = data.address.country || 'غير معروف';
        const countryCode = data.address.country_code ? data.address.country_code.toUpperCase() : null;
        
        userLocation.city = city;
        userLocation.country = country;
        userLocation.countryCode = countryCode;
        
        document.getElementById('locationInfo').textContent = `📍 ${city}, ${country}`;
    } catch (error) {
        console.error('خطأ في الحصول على معلومات المدينة:', error);
        document.getElementById('locationInfo').textContent = 
            `📍 ${userLocation.latitude.toFixed(4)}, ${userLocation.longitude.toFixed(4)}`;
    }
}

// تحديد طريقة الحساب المناسبة
function getCalculationMethod() {
    if (selectedMethod !== 'auto') {
        return parseInt(selectedMethod);
    }
    
    if (userLocation && userLocation.countryCode) {
        return methodsByCountry[userLocation.countryCode] || methodsByCountry['default'];
    }
    
    return methodsByCountry['default'];
}

// جلب مواقيت الصلاة من API
async function fetchPrayerTimes() {
    if (!userLocation) return;
    
    const method = getCalculationMethod();
    const today = new Date();
    const timestamp = Math.floor(today.getTime() / 1000);
    
    try {
        const response = await fetch(
            `https://api.aladhan.com/v1/timings/${timestamp}?latitude=${userLocation.latitude}&longitude=${userLocation.longitude}&method=${method}`
        );
        
        prayerData = await response.json();
        
        if (prayerData.code === 200) {
            displayPrayerTimes();
            updateMethodInfo(method);
        }
    } catch (error) {
        console.error('خطأ في جلب مواقيت الصلاة:', error);
        document.getElementById('prayerWidget').innerHTML = 
            '<div class="loading">حدث خطأ في تحميل المواقيت</div>';
    }
}

// عرض مواقيت الصلاة
function displayPrayerTimes() {
    const timings = prayerData.data.timings;
    
    // الصلوات (بدون الشروق)
    const prayers = [
        { name: 'الفجر', time: timings.Fajr },
        { name: 'الظهر', time: timings.Dhuhr },
        { name: 'العصر', time: timings.Asr },
        { name: 'المغرب', time: timings.Maghrib },
        { name: 'العشاء', time: timings.Isha }
    ];
    
    let html = '<div class="prayer-times-list">';
    prayers.forEach(prayer => {
        html += `
            <div class="prayer-time-item">
                <span class="prayer-name">${prayer.name}</span>
                <span class="prayer-time">${prayer.time}</span>
            </div>
        `;
    });
    html += '</div>';
    
    document.getElementById('prayerWidget').innerHTML = html;
}

// تحديث معلومات طريقة الحساب
function updateMethodInfo(method) {
    const methodName = methodNames[method] || 'غير معروف';
    document.getElementById('currentMethod').textContent = 
        `طريقة الحساب: ${methodName}`;
}

// عرض قائمة اختيار طريقة الحساب
function showMethodSelector() {
    const methods = Object.entries(methodNames)
        .map(([id, name]) => `<option value="${id}">${name}</option>`)
        .join('');
    
    const currentMethod = getCalculationMethod();
    
    const html = `
        <div style="margin: 15px 0;">
            <label>اختر طريقة الحساب:</label>
            <select id="methodSelect" style="width: 100%; padding: 8px; margin: 10px 0;">
                <option value="auto" ${selectedMethod === 'auto' ? 'selected' : ''}>تلقائي (حسب الموقع)</option>
                ${methods}
            </select>
            <button onclick="applyMethod()" class="method-btn">تطبيق</button>
            <button onclick="cancelMethodSelection()" class="method-btn">إلغاء</button>
        </div>
    `;
    
    document.querySelector('.method-selector').insertAdjacentHTML('beforeend', html);
    
    // تحديد الطريقة الحالية
    if (selectedMethod !== 'auto') {
        document.getElementById('methodSelect').value = selectedMethod;
    } else {
        document.getElementById('methodSelect').value = 'auto';
    }
}

// تطبيق طريقة الحساب المختارة
function applyMethod() {
    const select = document.getElementById('methodSelect');
    if (select) {
        selectedMethod = select.value;
        cancelMethodSelection();
        loadPrayerTimes();
    }
}

// إلغاء اختيار طريقة الحساب
function cancelMethodSelection() {
    const selector = document.querySelector('.method-selector > div:last-child');
    if (selector && selector.querySelector('#methodSelect')) {
        selector.remove();
    }
}

// تحميل المواقيت عند تحميل الصفحة
window.addEventListener('load', loadPrayerTimes);
</script>
            
            <div class="demo-terminal">
                <div class="demo-line"><span class="demo-prompt">$</span> <span class="demo-output">gtsalat</span></div>
                <div class="demo-line">سُبْحَانَ اللَّهِ وَبِحَمْدِهِ، سُبْحَانَ اللَّهِ الْعَظِيمِ</div>
                <div class="demo-line"></div>
                <div class="demo-line"><span class="demo-highlight">🕌 الصلاة القادمة: العصر عند 15:30 (باقي 02:15)</span></div>
            </div>
            
            <a href="https://github.com/SalehGNUTUX/GT-salat-dikr" class="btn">
                <i class="fab fa-github"></i> استعراض الكود المصدري
            </a>
            <a href="#installation" class="btn btn-secondary">
                <i class="fas fa-download"></i> التثبيت الفوري
            </a>
        </section>
        
        <!-- الأقسام الأخرى تبقى كما هي -->
        <section id="features">
            <h2><i class="fas fa-star"></i> الميزات المتقدمة</h2>
            <div class="features">
                <div class="feature-card">
                    <h3><i class="fas fa-book-quran"></i> أذكار شاملة ومتنوعة</h3>
                    <p>قاعدة بيانات شاملة تحتوي على أكثر من 80 ذكر متنوع من الأذكار الإسلامية الموثوقة، مع تحديث تلقائي من المصادر المعتمدة.</p>
                </div>
                
                <div class="feature-card">
                    <h3><i class="fas fa-clock"></i> مواقيت صلاة دقيقة</h3>
                    <p>حساب تلقائي لمواقيت الصلاة بدقة عالية بناءً على موقعك الجغرافي، مع دعم 22 طريقة حساب مختلفة من جميع أنحاء العالم الإسلامي.</p>
                </div>
                
                <div class="feature-card">
                    <h3><i class="fas fa-bell"></i> إشعارات ذكية</h3>
                    <p>إشعارات تلقائية للأذكار على فترات زمنية قابلة للتخصيص، تنبيه قبل الصلاة بـ10 دقائق، وإشعارات دخول وقت الصلاة مع تشغيل الأذان.</p>
                </div>
                
                <div class="feature-card">
                    <h3><i class="fas fa-desktop"></i> دعم جميع واجهات سطح المكتب</h3>
                    <p>توافق كامل مع GNOME, KDE, XFCE, i3, Sway, Awesome WM, Openbox, LXDE وجميع بيئات سطح المكتب الأخرى.</p>
                </div>
                
                <div class="feature-card">
                    <h3><i class="fas fa-terminal"></i> دعم جميع أنواع الطرفيات</h3>
                    <p>عمل متكامل مع Bash, Zsh, Fish, Ksh, Tcsh وجميع أنواع الشل، مع إعداد تلقائي لكل منها.</p>
                </div>
                
                <div class="feature-card">
                    <h3><i class="fas fa-sync-alt"></i> تحديث تلقائي</h3>
                    <p>تحديث تلقائي للبرنامج والأذكار، مع خيار التحديث اليدوي والحفاظ على الإعدادات الشخصية.</p>
                </div>
            </div>
        </section>
        
        <section id="installation">
            <h2><i class="fas fa-download"></i> التثبيت السريع</h2>
            
            <h3><i class="fas fa-bolt"></i> التثبيت التلقائي (مستحسن)</h3>
            <p>نسخة واحدة تشمل كل شيء - التثبيت، الإعدادات، البدء التلقائي:</p>
            <div class="code-block">
bash -c "$(curl -fsSL https://raw.githubusercontent.com/SalehGNUTUX/GT-salat-dikr/main/install.sh)"
            </div>
            
            <h3><i class="fas fa-cogs"></i> التثبيت اليدوي للمستخدمين المتقدمين</h3>
            <div class="code-block">
git clone https://github.com/SalehGNUTUX/GT-salat-dikr.git<br>cd GT-salat-dikr<br>chmod +x install.sh<br>./install.sh
            </div>
            
            <h3><i class="fas fa-trash"></i> إزالة التثبيت</h3>
            <div class="code-block">
bash -c "$(curl -fsSL https://raw.githubusercontent.com/SalehGNUTUX/GT-salat-dikr/main/uninstall.sh)"
            </div>
        </section>
        
        <section id="usage">
            <h2><i class="fas fa-terminal"></i> الأوامر المتاحة</h2>
            
            <div class="commands">
                <div class="command-item">
                    <p><code>gtsalat</code> - التشغيل العادي (عرض ذكر ومعلومات الصلاة القادمة)</p>
                </div>
                <div class="command-item">
                    <p><code>gtsalat --show-timetable</code> - عرض مواقيت الصلاة كاملة لليوم</p>
                </div>
                <div class="command-item">
                    <p><code>gtsalat -t</code> - اختصار لعرض مواقيت الصلاة</p>
                </div>
                <div class="command-item">
                    <p><code>gtsalat --settings</code> - إعدادات الموقع وطريقة الحساب</p>
                </div>
                <div class="command-item">
                    <p><code>gtsalat --notify-start</code> - تشغيل الإشعارات التلقائية</p>
                </div>
                <div class="command-item">
                    <p><code>gtsalat --notify-stop</code> - إيقاف الإشعارات</p>
                </div>
                <div class="command-item">
                    <p><code>gtsalat --test-notify</code> - اختبار الإشعارات</p>
                </div>
                <div class="command-item">
                    <p><code>gtsalat --test-adhan</code> - اختبار تشغيل الأذان</p>
                </div>
                <div class="command-item">
                    <p><code>gtsalat --test-approaching</code> - اختبار تنبيه اقتراب وقت الصلاة</p>
                </div>
                <div class="command-item">
                    <p><code>gtsalat --update-azkar</code> - تحديث الأذكار من الإنترنت</p>
                </div>
                <div class="command-item">
                    <p><code>gtsalat --self-update</code> - تحديث البرنامج نفسه</p>
                </div>
                <div class="command-item">
                    <p><code>gtsalat --status</code> - عرض حالة البرنامج</p>
                </div>
                <div class="command-item">
                    <p><code>gtsalat --logs</code> - عرض سجل التشغيل</p>
                </div>
                <div class="command-item">
                    <p><code>gtsalat --debug</code> - معلومات التشخيص</p>
                </div>
                <div class="command-item">
                    <p><code>gtsalat --help</code> - عرض المساعدة الكاملة</p>
                </div>
            </div>
        </section>
        
        <section id="screenshots">
            <h2><i class="fas fa-desktop"></i> أمثلة حية من البرنامج</h2>
            
            <h3>عرض الذكر وموعد الصلاة القادمة:</h3>
            <div class="code-block">
# عند فتح الطرفية تلقائيًا:<br>لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير<br><br>🕌 الصلاة القادمة: العصر عند 15:30 (باقي 02:15)
            </div>
            
            <h3>جدول المواقيت الكامل:</h3>
            <div class="code-block">
مواقيت الصلاة اليوم (الرياض):<br>      الفجر: 04:30<br>    الشروق: 05:45<br>      الظهر: 12:15<br>      العصر: 15:30  ← القادمة<br>     المغرب: 18:45<br>     العشاء: 20:00
            </div>
            
            <h3>حالة البرنامج المتقدمة:</h3>
            <div class="code-block">
📊 حالة GT-salat-dikr:<br>════════════════════════════════<br>✅ الإشعارات: تعمل (PID: 2543)<br><br>📍 الموقع: الرياض, السعودية<br>🧭 الإحداثيات: 24.7136, 46.6753<br>📖 طريقة الحساب: Umm Al-Qura University, Makkah<br><br>🕌 الصلاة القادمة: العصر<br>⏰ الوقت: 15:30<br>⏳ المتبقي: 02:15
            </div>
        </section>
        
        <section id="technical">
            <h2><i class="fas fa-cogs"></i> المعلومات التقنية</h2>
            
            <h3>المتطلبات الأساسية:</h3>
            <ul>
                <li>نظام لينكس (أي توزيعة)</li>
                <li>Bash 4.0 أو أحدث</li>
                <li>curl لتحميل الملفات</li>
                <li>jq لمعالجة JSON (اختياري لكن مستحسن)</li>
                <li>libnotify للإشعارات</li>
            </ul>
            
            <h3>الميزات التقنية:</h3>
            <ul>
                <li>دعم نظامي init: systemd و XDG autostart</li>
                <li>إدارة عمليات خلفية ذكية</li>
                <li>سجل أخطاء مفصل</li>
                <li>اكتشاف تلقائي للموقع الجغرافي</li>
                <li>واجهة رسومية للأذان (zenity/yad/kdialog)</li>
                <li>دعم مشغلات صوت متعددة (mpv, ffplay, paplay, ogg123)</li>
            </ul>
        </section>
        
        <section id="license">
            <h2><i class="fas fa-balance-scale"></i> الترخيص والمشاركة</h2>
            <p>هذا البرنامج مرخص تحت <span class="highlight">رخصة جنو العمومية (GPL v3)</span>. يمكنك:</p>
            <ul>
                <li>استخدام البرنامج مجانًا لأي غرض</li>
                <li>تعديل الشفرة المصدرية كما تشاء</li>
                <li>توزيع نسخ معدلة مع الإشارة إلى التغييرات</li>
                <li>المساهمة في تطوير المشروع</li>
            </ul>
            
            <p>المشروع مبني على فلسفة البرمجيات الحرة، ونرحب بجميع المساهمات والتطويرات.</p>
            
            <a href="https://github.com/SalehGNUTUX/GT-salat-dikr" class="btn">
                <i class="fas fa-code"></i> المساهمة في التطوير
            </a>
            <a href="https://github.com/SalehGNUTUX/GT-salat-dikr/issues" class="btn btn-secondary">
                <i class="fas fa-bug"></i> الإبلاغ عن مشكلة
            </a>
        </section>
    </div>
    
    <footer>
        <div class="container">
            <p>GT-salat-dikr - نظام إشعارات الصلاة والأذكار المتكامل</p>
            <p>تم التطوير بواسطة <a href="https://github.com/SalehGNUTUX">SalehGNUTUX</a> - مرخص تحت <a href="https://github.com/SalehGNUTUX/GT-salat-dikr/blob/main/LICENSE">GPL v3</a></p>
            <p>🌙 نسخة حديثة ومطورة - 2025</p>
        </div>
    </footer>

    <script>
        // تبديل الوضع المظلم
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = themeToggle.querySelector('i');
        
        // التحقق من التفضيل المحفوظ
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
            themeIcon.classList.remove('fa-moon');
            themeIcon.classList.add('fa-sun');
        }
        
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            
            if (currentTheme === 'dark') {
                document.documentElement.removeAttribute('data-theme');
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
                localStorage.setItem('theme', 'light');
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
                localStorage.setItem('theme', 'dark');
            }
        });
        
        // تأثيرات scroll suave
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });

        // طرق حساب مواقيت الصلاة
        const METHODS = [
            "Muslim World League",
            "Islamic Society of North America", 
            "Egyptian General Authority of Survey",
            "Umm Al-Qura University, Makkah",
            "University of Islamic Sciences, Karachi",
            "Institute of Geophysics, University of Tehran",
            "Shia Ithna-Ashari, Leva Institute, Qum",
            "Gulf Region",
            "Kuwait",
            "Qatar",
            "Majlis Ugama Islam Singapura, Singapore",
            "Union Organization islamic de France",
            "Diyanet İşleri Başkanlığı, Turkey",
            "Spiritual Administration of Muslims of Russia",
            "Moonsighting Committee",
            "Dubai, UAE",
            "Jabatan Kemajuan Islam Malaysia (JAKIM)",
            "Tunisia",
            "Algeria",
            "Kementerian Agama Republik Indonesia",
            "Morocco",
            "Comunidate Islamica de Lisboa (Portugal)"
        ];

        const METHOD_IDS = [3, 2, 5, 4, 1, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 24, 19, 20, 21, 22, 23];

        // بيانات الأذكار
        const azkar = [
            "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ، سُبْحَانَ اللَّهِ الْعَظِيمِ",
            "لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ",
            "اللَّهُمَّ صَلِّ عَلَى مُحَمَّدٍ وَعَلَى آلِ مُحَمَّدٍ",
            "أسْتَغْفِرُ اللَّهِ الْعَظِيمَ الَّذِي لَا إِلَهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ وَأَتُوبُ إِلَيْهِ",
            "حَسْبِيَ اللَّهُ لَا إِلَهَ إِلَّا هُوَ عَلَيْهِ تَوَكَّلْتُ وَهُوَ رَبُّ الْعَرْشِ الْعَظِيمِ",
            "اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْهَمِّ وَالْحَزَنِ، وَالْعَجْزِ وَالْكَسَلِ، وَالْجُبْنِ وَالْبُخْلِ، وَضَلَعِ الدَّيْنِ وَغَلَبَةِ الرِّجَالِ",
            "سُبْحَانَ اللَّهِ، وَالْحَمْدُ لِلَّهِ، وَلَا إِلَهَ إِلَّا اللَّهُ، وَاللَّهُ أَكْبَرُ",
            "لَا حَوْلَ وَلَا قُوَّةَ إِلَّا بِاللَّهِ الْعَلِيِّ الْعَظِيمِ",
            "اللَّهُمَّ أَنْتَ رَبِّي لَا إِلَهَ إِلَّا أَنْتَ، عَلَيْكَ تَوَكَّلْتُ، وَأَنْتَ رَبُّ الْعَرْشِ الْعَظِيمِ"
        ];

        // بيانات المستخدم
        let userLocation = {
            lat: null,
            lon: null,
            city: '',
            country: '',
            method: 4, // Umm Al-Qura University, Makkah (افتراضي)
            methodName: 'Umm Al-Qura University, Makkah',
            timeAdjustment: 0, // تعديل الوقت بالساعات
            summerTime: 'auto' // التوقيت الصيفي: auto, on, off
        };

        // تحميل مواقيت الصلاة
        async function loadPrayerTimes() {
            const widget = document.getElementById('prayerWidget');
            const locationInfo = document.getElementById('locationInfo');
            
            // إذا لم يتم تحديد موقع بعد، نكتشفه تلقائيًا
            if (!userLocation.lat || !userLocation.lon) {
                await autoDetectLocation();
            }
            
            // تحديث معلومات الموقع
            locationInfo.textContent = userLocation.city && userLocation.country 
                ? `${userLocation.city}, ${userLocation.country} (${userLocation.lat.toFixed(4)}, ${userLocation.lon.toFixed(4)})`
                : `الموقع: ${userLocation.lat.toFixed(4)}, ${userLocation.lon.toFixed(4)}`;
            
            // تحديث طريقة الحساب
            document.getElementById('currentMethod').textContent = `طريقة الحساب: ${userLocation.methodName}`;
            
            // تحديث إعدادات التوقيت
            document.getElementById('summerTime').value = userLocation.summerTime;
            document.getElementById('timeAdjustment').textContent = userLocation.timeAdjustment;
            
            try {
                // محاكاة جلب مواقيت الصلاة (في التطبيق الحقيقي سيتم جلبها من API)
                const prayerTimes = generatePrayerTimes();
                
                // عرض مواقيت الصلاة
                displayPrayerTimes(prayerTimes);
                
            } catch (error) {
                widget.innerHTML = `<div class="error">خطأ في جلب مواقيت الصلاة: ${error.message}</div>`;
            }
        }

        // اكتشاف الموقع التلقائي
        async function autoDetectLocation() {
            const locationInfo = document.getElementById('locationInfo');
            locationInfo.textContent = 'جاري اكتشاف موقعك...';
            
            try {
                // في المتصفح، نستخدم Geolocation API
                const position = await new Promise((resolve, reject) => {
                    navigator.geolocation.getCurrentPosition(resolve, reject);
                });
                
                userLocation.lat = position.coords.latitude;
                userLocation.lon = position.coords.longitude;
                
                // محاولة الحصول على اسم المدينة والدولة
                try {
                    const response = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${userLocation.lat}&longitude=${userLocation.lon}&localityLanguage=ar`);
                    const data = await response.json();
                    
                    userLocation.city = data.city || data.locality || '';
                    userLocation.country = data.countryName || '';
                    
                    // تحديد طريقة الحساب المناسبة حسب المنطقة
                    determineCalculationMethod();
                    
                    // تحديد إعدادات التوقيت الصيفي حسب المنطقة
                    determineSummerTimeSettings();
                    
                } catch (error) {
                    console.log('تعذر الحصول على معلومات الموقع التفصيلية');
                    determineCalculationMethod();
                    determineSummerTimeSettings();
                }
                
            } catch (error) {
                // إذا فشل الاكتشاف التلقائي، نستخدم موقع افتراضي (مكة المكرمة)
                userLocation.lat = 21.4225;
                userLocation.lon = 39.8262;
                userLocation.city = 'مكة المكرمة';
                userLocation.country = 'السعودية';
                userLocation.method = 4;
                userLocation.methodName = METHODS[3];
                userLocation.summerTime = 'off'; // السعودية لا تستخدم التوقيت الصيفي
                
                locationInfo.textContent = 'تم استخدام الموقع الافتراضي (مكة المكرمة)';
            }
        }

        // تحديد طريقة الحساب حسب المنطقة
        function determineCalculationMethod() {
            const country = userLocation.country.toLowerCase();
            
            if (country.includes('saudi') || country.includes('السعودية')) {
                userLocation.method = 4; // Umm Al-Qura
                userLocation.methodName = METHODS[3];
            } else if (country.includes('egypt') || country.includes('مصر')) {
                userLocation.method = 5; // Egyptian
                userLocation.methodName = METHODS[2];
            } else if (country.includes('turkey') || country.includes('تركيا')) {
                userLocation.method = 14; // Diyanet
                userLocation.methodName = METHODS[12];
            } else if (country.includes('malaysia') || country.includes('ماليزيا')) {
                userLocation.method = 17; // JAKIM
                userLocation.methodName = METHODS[16];
            } else if (country.includes('indonesia') || country.includes('إندونيسيا')) {
                userLocation.method = 21; // Kemenag
                userLocation.methodName = METHODS[19];
            } else if (country.includes('qatar') || country.includes('قطر')) {
                userLocation.method = 11; // Qatar
                userLocation.methodName = METHODS[9];
            } else if (country.includes('kuwait') || country.includes('الكويت')) {
                userLocation.method = 10; // Kuwait
                userLocation.methodName = METHODS[8];
            } else if (country.includes('uae') || country.includes('الإمارات')) {
                userLocation.method = 18; // Dubai
                userLocation.methodName = METHODS[15];
            } else if (country.includes('north america') || country.includes('الولايات المتحدة') || country.includes('كندا')) {
                userLocation.method = 2; // ISNA
                userLocation.methodName = METHODS[1];
            } else if (country.includes('europe') || country.includes('أوروبا') || country.includes('فرنسا')) {
                userLocation.method = 13; // Union Organization islamic de France
                userLocation.methodName = METHODS[11];
            } else {
                userLocation.method = 3; // Muslim World League
                userLocation.methodName = METHODS[0];
            }
        }

        // تحديد إعدادات التوقيت الصيفي حسب المنطقة
        function determineSummerTimeSettings() {
            const country = userLocation.country.toLowerCase();
            const now = new Date();
            const month = now.getMonth() + 1;
            const isSummer = month >= 4 && month <= 10;
            
            // الدول التي تستخدم التوقيت الصيفي
            const summerTimeCountries = [
                'united states', 'الولايات المتحدة', 'كندا', 'canada', 'أوروبا', 'europe',
                'بريطانيا', 'united kingdom', 'فرنسا', 'france', 'ألمانيا', 'germany',
                'إيطاليا', 'italy', 'إسبانيا', 'spain'
            ];
            
            const usesSummerTime = summerTimeCountries.some(countryName => 
                country.includes(countryName.toLowerCase())
            );
            
            if (usesSummerTime) {
                userLocation.summerTime = isSummer ? 'on' : 'off';
                // تعديل تلقائي للساعة حسب التوقيت الصيفي
                userLocation.timeAdjustment = isSummer ? 1 : 0;
            } else {
                userLocation.summerTime = 'off';
                userLocation.timeAdjustment = 0;
            }
        }

        // توليد مواقيت الصلاة (محاكاة)
        function generatePrayerTimes() {
            // في التطبيق الحقيقي، سيتم حساب هذه الأوقات بناءً على الموقع والتاريخ وطريقة الحساب
            const now = new Date();
            let times = {
                fajr: '04:30',
                sunrise: '05:45',
                dhuhr: '12:15',
                asr: '15:30',
                maghrib: '18:45',
                isha: '20:00'
            };
            
            // تطبيق تعديل الوقت
            if (userLocation.timeAdjustment !== 0) {
                times = adjustPrayerTimes(times, userLocation.timeAdjustment);
            }
            
            // تحديد الصلاة التالية
            const currentTime = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
            let nextPrayer = '';
            let nextPrayerTime = '';
            
            const prayerOrder = ['fajr', 'sunrise', 'dhuhr', 'asr', 'maghrib', 'isha'];
            for (const prayer of prayerOrder) {
                if (currentTime < times[prayer]) {
                    nextPrayer = prayer;
                    nextPrayerTime = times[prayer];
                    break;
                }
            }
            
            // إذا لم توجد صلاة قادمة اليوم، نستخدم الفجر في اليوم التالي
            if (!nextPrayer) {
                nextPrayer = 'fajr';
                nextPrayerTime = times.fajr;
            }
            
            return {
                times,
                nextPrayer,
                nextPrayerTime,
                currentTime,
                adjustment: userLocation.timeAdjustment,
                summerTime: userLocation.summerTime
            };
        }

        // تعديل أوقات الصلاة
        function adjustPrayerTimes(times, adjustment) {
            const adjustedTimes = {};
            
            for (const [prayer, time] of Object.entries(times)) {
                const [hours, minutes] = time.split(':').map(Number);
                let adjustedHours = hours + adjustment;
                
                // التعامل مع تجاوز حدود اليوم (0-23)
                if (adjustedHours >= 24) {
                    adjustedHours -= 24;
                } else if (adjustedHours < 0) {
                    adjustedHours += 24;
                }
                
                adjustedTimes[prayer] = `${adjustedHours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
            }
            
            return adjustedTimes;
        }

        // عرض مواقيت الصلاة
        function displayPrayerTimes(data) {
            const widget = document.getElementById('prayerWidget');
            const prayerNames = {
                fajr: 'الفجر',
                sunrise: 'الشروق',
                dhuhr: 'الظهر',
                asr: 'العصر',
                maghrib: 'المغرب',
                isha: 'العشاء'
            };
            
            let html = `
                <div class="next-prayer">
                    الصلاة القادمة: ${prayerNames[data.nextPrayer]} عند ${data.nextPrayerTime}
                </div>
            `;
            
            // عرض معلومات التعديل إذا كان هناك تعديل
            if (data.adjustment !== 0) {
                const adjustmentSign = data.adjustment > 0 ? '+' : '';
                html += `
                    <div class="prayer-info" style="color: var(--accent); font-size: 0.9rem;">
                        <i class="fas fa-info-circle"></i> تم تعديل المواقيت بمقدار ${adjustmentSign}${data.adjustment} ساعة
                    </div>
                `;
            }
            
            html += `<div class="prayer-times-grid">`;
            
            for (const [prayer, time] of Object.entries(data.times)) {
                const isNext = prayer === data.nextPrayer;
                html += `
                    <div class="prayer-time-item ${isNext ? 'next' : ''}">
                        <div class="prayer-name">${prayerNames[prayer]}</div>
                        <div class="prayer-time">${time}</div>
                    </div>
                `;
            }
            
            html += `</div>`;
            
            // إضافة ذكر عشوائي
            const randomZikr = azkar[Math.floor(Math.random() * azkar.length)];
            html += `<div class="prayer-info">${randomZikr}</div>`;
            
            widget.innerHTML = html;
        }

        // تبديل التوقيت الصيفي
        function toggleSummerTime() {
            const summerTimeSelect = document.getElementById('summerTime');
            userLocation.summerTime = summerTimeSelect.value;
            
            // تطبيق التعديل التلقائي للتوقيت الصيفي
            if (userLocation.summerTime === 'on') {
                userLocation.timeAdjustment = 1;
            } else if (userLocation.summerTime === 'off') {
                userLocation.timeAdjustment = 0;
            } else {
                // الوضع التلقائي - نحدد حسب المنطقة والتاريخ
                determineSummerTimeSettings();
            }
            
            // تحديث العرض
            loadPrayerTimes();
        }

        // تعديل الوقت يدويًا
        function adjustTime(hours) {
            userLocation.timeAdjustment += hours;
            
            // الحد من نطاق التعديل (-12 إلى +12 ساعة)
            if (userLocation.timeAdjustment > 12) userLocation.timeAdjustment = 12;
            if (userLocation.timeAdjustment < -12) userLocation.timeAdjustment = -12;
            
            // تحديث العرض
            loadPrayerTimes();
        }

        // إعادة ضبط تعديل الوقت
        function resetTimeAdjustment() {
            userLocation.timeAdjustment = 0;
            loadPrayerTimes();
        }

        // عرض محدد طريقة الحساب
        function showMethodSelector() {
            let methodList = 'اختر طريقة حساب مواقيت الصلاة:\n\n';
            METHODS.forEach((method, index) => {
                methodList += `${index + 1}) ${method}\n`;
            });
            
            const selected = prompt(methodList + '\nأدخل الرقم:', userLocation.method);
            
            if (selected && !isNaN(selected) && selected >= 1 && selected <= METHODS.length) {
                const methodIndex = parseInt(selected) - 1;
                userLocation.method = METHOD_IDS[methodIndex];
                userLocation.methodName = METHODS[methodIndex];
                
                // إعادة تحميل مواقيت الصلاة
                loadPrayerTimes();
            }
        }

        // تبديل نموذج الموقع اليدوي
        function toggleManualLocation() {
            const form = document.getElementById('manualLocationForm');
            form.style.display = form.style.display === 'block' ? 'none' : 'block';
        }

        // تطبيق الموقع اليدوي
        function applyManualLocation() {
            const lat = parseFloat(document.getElementById('manualLat').value);
            const lon = parseFloat(document.getElementById('manualLon').value);
            const city = document.getElementById('manualCity').value;
            const country = document.getElementById('manualCountry').value;
            
            if (isNaN(lat) || isNaN(lon)) {
                alert('يرجى إدخال إحداثيات صحيحة');
                return;
            }
            
            userLocation.lat = lat;
            userLocation.lon = lon;
            userLocation.city = city;
            userLocation.country = country;
            
            // تحديد طريقة الحساب المناسبة
            determineCalculationMethod();
            
            // تحديد إعدادات التوقيت الصيفي
            determineSummerTimeSettings();
            
            // إخفاء النموذج
            toggleManualLocation();
            
            // إعادة تحميل مواقيت الصلاة
            loadPrayerTimes();
        }

        // تحميل مواقيت الصلاة عند فتح الصفحة
        window.addEventListener('DOMContentLoaded', () => {
            loadPrayerTimes();
        });
    </script>
</body>
</html>
